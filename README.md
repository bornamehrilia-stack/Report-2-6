# Report-2-6:

---



**موضوع آزمایش:** پردازش ترکیبی دستورات متنی و عددی در ارتباط سریال

**گردآورندگان:** امین طلوع فکور و ایلیا برنامهر

---

### ۱. هدف آزمایش

پیاده‌سازی یک الگوریتم هوشمند برای تفکیک دستورات متنی از مقادیر عددی، آشنایی با متد تبدیل نوع داده (**String to Int**) و ایجاد بازخورد (Feedback) از طرف میکروکنترلر به رایانه.

### ۲. شرح مختصر مدار

این پروژه شامل یک برد **Arduino Uno** و یک LED متصل به پین شماره **۶** است. ویژگی متمایز این مدار، توانایی پردازش دو نوع منطق متفاوت است:

1. **منطق متنی:** با دریافت عبارت **"SABZ"**، خروجی فعال می‌شود.
2. **منطق عددی:** با دریافت عدد **"50"**، خروجی غیرفعال می‌شود.
همچنین آردوینو پس از اجرای هر دستور، تاییدیه آن را به صورت متنی به سریال مانیتور برمی‌گرداند.

### ۳. موارد مورد نیاز

* برد **Arduino Uno**
* یک عدد **LED** به همراه مقاومت محافظ (۲۲۰ اهم)
* برد بورد و سیم‌های اتصال
* کابل USB جهت پروگرام و ارتباط سریال

### ۴. نمایش کد پروژه

```cpp
const int ledPin = 6; // تعریف پین خروجی LED

void setup() {
  pinMode(ledPin, OUTPUT); // تنظیم پین به عنوان خروجی
  Serial.begin(9600);      // آغاز ارتباط سریال
}

void loop() {
  // بررسی وجود داده در درگاه سریال
  if(Serial.available() > 0){
    // خواندن کل پیام ورودی تا رسیدن به خط بعد
    String incomingByte = Serial.readStringUntil('\n');
    
    // تبدیل رشته دریافتی به عدد (در صورت امکان)
    int value = incomingByte.toInt();
    
    // بررسی دستور متنی برای روشن کردن
    if (incomingByte == "SABZ"){
      digitalWrite(ledPin, HIGH);
      Serial.println("LED ON"); // ارسال بازخورد به کاربر
    } 
    // بررسی مقدار عددی برای خاموش کردن
    else if (value == 50){
      digitalWrite(ledPin, LOW);
      Serial.println("LED OFF"); // ارسال بازخورد به کاربر
    }
  }
}

```

### ۵. توضیح مختصر کد

* **`readStringUntil('\n')`**: تمام کاراکترهای ارسالی را به صورت یکجا دریافت می‌کند.
* **`toInt()`**: این متد تلاش می‌کند متن ورودی را به عدد تبدیل کند. اگر ورودی حروف باشد، مقدار ۰ برمی‌گرداند و اگر عدد باشد، مقدار عددی آن را در `value` ذخیره می‌کند.
* **بازخورد سریال (`Serial.println`)**: این بخش بسیار مهم است؛ زیرا به کاربر اطمینان می‌دهد که دستور توسط ریزپردازنده دریافت و اجرا شده است.

